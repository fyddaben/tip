"use strict";function EditArticle(t,e,r,n){function i(r){t.markContent=n.trustAsHtml(md.render(t.content));angular.element(document.body);e.show({scope:t,templateUrl:"article.html",controller:["$scope","$mdDialog",function(t,e){t.closeDialog=function(){e.hide()}}],preserveScope:!0})}function o(){var e=new r;e.author=t.currentUser,e.title=t.title,e.content=t.content,e.markContent=md.render(t.content),t.artId?r.update({id:t.artId},e,function(t){a(t)}):e.$save(function(t){a(t)})}t.userList=["@daben","@tian","@zhangmei","@bold","@jsonBeta"],t.currentUser="@daben",article&&(t.currentUser=article.author,t.title=article.title,t.content=article.content,t.artId=article.art_id),t.showDialog=i;var a=function(r){e.hide();var n=parseInt(r.code);if(200===n){t.areId=r.areId;var i=e.alert({title:"恭喜您",content:"插入成功!",ok:"I Got It!"});e.show(i)["finally"](function(){i=void 0,location.href="http://tip.mi.com/detail/"+r.areId})}};t.save=o}var tipApp=angular.module("MyTipApp",["ngMaterial","ngResource"]),md=window.markdownit();tipApp.factory("Articles",["$resource",function(t){return t("/article/:id",{areId:"@id"},{update:{method:"PUT"}})}]),tipApp.filter("toMarkDown",function(){var t=function(t){return md.render(t)};return t}),tipApp.controller("EditArticleController",["$scope","$mdDialog","Articles","$sce",EditArticle]);